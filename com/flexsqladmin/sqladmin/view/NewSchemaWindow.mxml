<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="400" height="300"
                creationComplete="init();"
                title="Creating New Schema"
                close="closeWin();"
                >
    <mx:Validator source="{new_name}" property="text" />

    <mx:Panel horizontalAlign="center" verticalAlign="middle" width="100%" height="100%">
    <mx:Form top="10">
        <mx:FormItem label="Schema Name">
            <mx:TextInput id="new_name" />
        </mx:FormItem>
        <mx:FormItem />
        <mx:FormItem>
            <mx:Button label="Create" icon="@Embed(source='/icons/exec.gif')" click="createSchema();" />
        </mx:FormItem>
    </mx:Form>
    </mx:Panel>
    
    <mx:Script>
        <![CDATA[
            import com.adobe.cairngorm.control.CairngormEventDispatcher;
            import com.flexsqladmin.sqladmin.components.DebugWindow;
            import com.flexsqladmin.sqladmin.events.MetaDataEvent;
            import com.flexsqladmin.sqladmin.events.TableDetailsEvent;
            import com.flexsqladmin.sqladmin.model.ModelLocator;
            import com.flexsqladmin.sqladmin.utils.ActionEnum;
            
            import mx.controls.Alert;
            import mx.events.CloseEvent;
            import mx.managers.PopUpManager;
            
            private var model:ModelLocator = ModelLocator.getInstance();
            
            public function init() : void {
                PopUpManager.centerPopUp(this);
                new_name.setFocus();                
            }
            
            public function createSchema() : void {
                if (new_name.text != '') {
                    var addSchEvent:TableDetailsEvent = new TableDetailsEvent(model.currentcatalogname, new_name.text, '', ActionEnum.PUT);
                    CairngormEventDispatcher.getInstance().dispatchEvent(addSchEvent);
                    var metadataevent : MetaDataEvent = new MetaDataEvent(model.currentcatalogname);
                    CairngormEventDispatcher.getInstance().dispatchEvent(metadataevent);
                } else {
                    new_name.setFocus();
                }
            }
                        
            public function closeWin() : void {
                PopUpManager.removePopUp(this);
            }
            
        ]]>
    </mx:Script>
    
</mx:TitleWindow>
